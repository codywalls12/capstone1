<!DOCTYPE html>
<html>
    <head>  
        <link href=”http://cdn.pydata.org/bokeh/release/bokeh-3.3.1.min.css" rel=”stylesheet” type=”text/css”>
        <link href=”http://cdn.pydata.org/bokeh/release/bokeh-widgets-3.3.1.min.css" rel=”stylesheet” type=”text/css”>

        <meta charset="UTF-8">
        <title>Graph Sonification</title>
        {% load static %}
        <link rel="stylesheet" href="{% static 'graph/style.css' %}">
        
    </head>
    <body>
    <div class="navbar">
    <div>
      <a href="{% url 'graph:index' %}">
            <img src="https://i.ibb.co/pZZRGV0/logo-removebg-preview.png" border="0" alt="Logo for the website. Has the team name: Syntax Squad in a circle with a graph depicting sound waves behind it" height="60" width="120">        
        </a>
    </div>

  <a href="{% url 'graph:about_us' %}" class="dropbutton" style="position: fixed; top: 0px; right: calc(10px + 110px); height: 40px; text-align: center;line-height: 40px;text-decoration: none;">About Us</a>

   
    <div class="dropdown">
  <button onclick="toggledrop()" class="dropbutton">Settings</button>
  <div id="dropperdowner" class="dropdown-content">
    <!-- <a href="#" onclick="defaultMode()">Default</a>
    <a href="#" onclick="darkMode()">Dark Mode</a>
    <a href="#" onclick="protanopiaMode()">Protanopia</a>
    <a href="#" onclick="deuteranopiaMode()">Deuteranopia</a>
    <a href="#" onclick="tritanopiaMode()">Tritanopia</a> -->
    <button id="defaultID" onclick="defaultMode('defaultCSS')">Default</button>
    <button id="darkmodeID" onclick="darkMode('darkmodeCSS')">Dark Mode</button>
    <button id="protanopiaID" onclick="protanopiaMode('protanopiaCSS')">Protanopia</button>
    <button id="deuteranopiaID" onclick="deuteranopiaMode('deuteranopiaCSS')">Deuteranopia</button>
    <button id="tritanopiaID" onclick="tritanopiaMode('tritanopiaCSS')">Tritanopia</button>
    <button id = "monochromaID" onclick="monochromaMode('monochromaCSS')">Monochroma</button>
  </div>
  
</div>
</div>
        <p>{{ graph_name }}</p>
        {{ div| safe }}


        <!--This button will play the .wav file generated by the user input on the index.html page-->
        
        <audio id="audioPlayer" src="{% static 'graph/graph_audio.wav' %}"></audio>
    
        <button onclick="playAudio()">Play Audio</button>
    
        <script>
            function playAudio() {
                var audio = document.getElementById('audioPlayer');
                audio.play();
            }
        </script>

 <script>

 function toggledrop(){
                        document.getElementById("dropperdowner").classList.toggle("show");
                    }
                    window.onclick = function(event){
                        if (!event.target.matches('.dropbutton')){
                            var dropdowns = document.getElementsByClassName("dropdown-content");
                            var i;
                            for (i = 0; i < dropdowns.length; i++){
                                var openDropdown = dropdowns[i];
                                if (openDropdown.classList.contains('show')){
                                    openDropdown.classList.remove('show');
                                }
                            }
                        }
                    } 

   var setMode = localStorage.getItem('theme');
        console.log('theme:', setMode);                
        function defaultMode() {
            let elementBody = document.body;
            elementBody.className = "body";
        }
       if (setMode == null) {
            defaultMode('defaultCSS');
        }
        else if (setMode == 'defaultCSS') {
            defaultMode('defaultCSS');
        }
        else if (setMode == 'darkmodeCSS') {
            darkMode('darkmodeCSS');
        }
        else if (setMode == 'protanopiaCSS') {
            protanopiaMode('protanopiaCSS');
        }
        else if (setMode == 'deuteranopiaCSS') {
            deuteranopiaMode('deuteranopiaCSS');
        }
        else if (setMode == 'tritanopiaCSS') {
            tritanopiaMode('tritanopiaCSS');
        }
        else if (setMode == 'monochromaCSS') {
            monochromaMode('monochromaCSS');
        }

        function defaultMode(content) {
            let elementBody = document.body;
            elementBody.className = "body";

            //let content = document.getElementById("defaultID"); //html id name
            content.innerText = "Default"; //testing
            localStorage.setItem('theme', content); //saves to local storage

            let image1 = document.getElementById("step1");
            let image2 = document.getElementById("step2");
            let image3 = document.getElementById("step3");
            image1.src = "https://i.ibb.co/SfDTf84/step1.jpg";
            image2.src = "https://i.ibb.co/4m4ddWD/step2.jpg";
            image3.src = "https://i.ibb.co/jvmLfpF/step3.jpg";
        }
        function darkMode(content) {
            let elementBody = document.body;
            elementBody.className = "darkmode"; //css class name
            
            //const elementBody = document.getElementById("darkmode");
            //let sheet = document.getElementById("darkmodeID");
            //let content = document.getElementById("darkmodeID"); //html id name
            //document.getElementById('darkmodeID') = sheet
            content.innerText = "Dark Mode"; //testing
            localStorage.setItem('theme', content); //saves to local storage

            let image1 = document.getElementById("step1");
            let image2 = document.getElementById("step2");
            let image3 = document.getElementById("step3");
            image1.src = "https://i.ibb.co/dgCzR5q/step1D.jpg";
            image2.src = "https://i.ibb.co/3Y1XhVT/step2D.jpg";
            image3.src = "https://i.ibb.co/gPq6WcD/step3D.jpg";
        }
        function protanopiaMode(content) {
            let elementBody = document.body;
            elementBody.className = "protanopia";

            //let content = document.getElementById("protanopiaID"); //html id name
            content.innerText = "Protanopia"; //testing
            localStorage.setItem('theme', content); //saves to local storage

            let image1 = document.getElementById("step1");
            let image2 = document.getElementById("step2");
            let image3 = document.getElementById("step3");
            image1.src = "https://i.ibb.co/yst2vrZ/step1Pro.jpg";
            image2.src = "https://i.ibb.co/4m4ddWD/step2.jpg";
            image3.src = "https://i.ibb.co/jvmLfpF/step3.jpg";
        }
        function deuteranopiaMode(content) {
            let elementBody = document.body;
            elementBody.className = "deuteranopia";

            //let content = document.getElementById("deuteranopiaID"); //html id name
            content.innerText = "Deuteranopia"; //testing
            localStorage.setItem('theme', content) //saves to local storage

            let image1 = document.getElementById("step1");
            let image2 = document.getElementById("step2");
            let image3 = document.getElementById("step3");
            image1.src = "https://i.ibb.co/dKLvMKR/step1Deu.jpg";
            image2.src = "https://i.ibb.co/4m4ddWD/step2.jpg";
            image3.src = "https://i.ibb.co/jvmLfpF/step3.jpg";
        }
        function tritanopiaMode(content) {
            let elementBody = document.body;
            elementBody.className = "tritanopia";

            //let content = document.getElementById("tritanopiaID"); //html id name
            content.innerText = "Tritanopia"; //testing
            localStorage.setItem('theme', content) //saves to local storage

            let image1 = document.getElementById("step1");
            let image2 = document.getElementById("step2");
            let image3 = document.getElementById("step3");
            image1.src = "https://i.ibb.co/YDf4fHm/step2tri-JPG.jpg";
            image2.src = "https://i.ibb.co/4m4ddWD/step2.jpg";
            image3.src = "https://i.ibb.co/jvmLfpF/step3.jpg";
        }
        function monochromaMode(content) {
            let elementBody = document.body;
            elementBody.className = "monochroma";

            //let content = document.getElementById("monochromaID"); //html id name
            content.innerText = "Monochroma"; //testing
            localStorage.setItem('theme', content) //saves to local storage

            let image1 = document.getElementById("step1");
            let image2 = document.getElementById("step2");
            let image3 = document.getElementById("step3");
            image1.src = "https://i.ibb.co/ySDqb4R/step1mono.jpg";
            image2.src = "https://i.ibb.co/4m4ddWD/step2.jpg";
            image3.src = "https://i.ibb.co/jvmLfpF/step3.jpg";
        }
	
    </script>
    </body>

    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-3.3.1.min.js"></script>
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.3.1.min.js"></script>
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.3.1.min.js"></script>
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-3.3.1.min.js"></script>
    {{ script| safe }}
</html>